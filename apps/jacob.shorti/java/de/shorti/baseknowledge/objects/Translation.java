package de.shorti.baseknowledge.objects;

/**
 * short-i Class generated by automatic ClassGenerator
 * Date: Wed Mar 14 14:59:41 GMT+01:00 2001
 */
import de.shorti.db.*;
import java.util.ArrayList;
import java.util.Iterator;
import java.sql.*;
import de.shorti.util.basic.*;

public class Translation extends _dbTranslation
{
    static TraceDispatcher  trace = TraceFactory.getTraceDispatcher();
    static java.util.Random random = new java.util.Random();

	public static String translate(String _original, Language _toLang)
	{
		SaveStatement  stmt=null;

		try
		{
			stmt = ConnectionManager.getValid().createStatement("de.shorti.baseknowledge.objects.Translation.traslate()");
            ResultSet s = stmt.executeQuery( "SELECT trans FROM Translation WHERE original='"+_original+"' AND transLanguage_id='"+_toLang.getId()+"'");
            if(s.next())
                return s.getString(1);
		}
		catch (Exception ex)
		{
            trace.error(ex);
		}
        finally
        {
			stmt.close();
        }
		return null;
	}

    /**
     * return one random translation object from the database
     *
     */
    public static ArrayList getRandom(Language origLang, Language transLang, int count)
    {
        ArrayList result = new ArrayList();
        SaveStatement stmt=null;
        try
        {
            stmt  = ConnectionManager.getValid().createStatement("Translation.getRandom");
            ResultSet s = stmt.executeQuery( " SELECT  count(*) FROM Translation"+
                                             " WHERE originalLanguage_id='"+origLang.getId()+"'"+
                                             " AND   transLanguage_id='"+transLang.getId()+"'");
            int itemCount = s.getInt(1);
            s.close();
            int begin = java.lang.Math.abs(random.nextInt())%(itemCount-10);

            s = stmt.executeQuery( " SELECT  id"+
                                   " FROM Translation"+
                                   " WHERE originalLanguage_id='"+origLang.getId()+"'"+
                                   " AND   transLanguage_id='"+transLang.getId()+"'"+
                                   " limit "+begin+","+count);
            while(s.next())
                result.add(findById(s.getString(1)));

            s.close();
        }
        catch(SQLException exc)
        {
            trace.error(exc);
        }
        stmt.close();
        return result;
    }

    /**
     *
     */
    static
    {
    }

}
